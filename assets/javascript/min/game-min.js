$(document).ready(function(){function e(){var e=$(this).attr("id");return e=parseInt(e),0===m.gameStage?(m.selectCharacter(e),void i(e)):1===m.gameStage?m.playerCharacter.id===e?($("#message").html("you can't fight yourself"),!1):(m.selectOpponent(e),void s()):void 0}function a(){$("#message").empty();var e=m.attack();c(e[0]),e.length>1&&(r(e[1]),r(e[2]))}function t(){m.reset(),r(m.charactersArray)}function n(){$.each(m.charactersArray,function(e,a){$("#instructions").html("Choose a character");var t=$("<div>").attr("id",e).addClass("character");$("<p class='strong mb-0'>").html(a.name).appendTo(t),$("<img>").attr("src",a.image).addClass("img-fluid").appendTo(t);var n=$("<ul>").addClass("stats"),r=$("<li>").append("<span>").addClass("hp").prepend("Health: "),i=$("<li>").append("<span>").addClass("attack").prepend("Attack: "),s=$("<li>").append("<span>").addClass("counter-attack").prepend("Counter Attack: ");$(n).append(r).appendTo(t),$(t).appendTo("#characters")}),r(m.charactersArray)}function r(e){function a(e){var a="#"+e.id;$(a).find(".hp span").html(e.hp),$(a).find(".attack span").html(e.attack),$(a).find(".counter-attack span").html(e.counterAttack)}Array.isArray(e)?$.each(e,function(e,t){a(t)}):a(e)}function i(e){$("#"+e).addClass("me");var a=m.enemies;$.each(a,function(e,a){$("#"+a.id).addClass("enemy")}),$("#instructions").html("Choose opponent")}function s(){$("#"+m.enemyFighting.id).addClass("fighting"),$("#message").empty(),$("#instructions").html("Attack!")}function c(e){$("#message").append(e)}function o(e){$("#message").append("<br> "+e),$("#instructions").html(e),$("#reset").addClass("show"),$("#attack").addClass("hide")}function h(e){$("#message").append("<br>You defeated "+e+". Pick your next opponent!"),$("#instructions").html("Choose opponent")}function p(){$("#instructions").html("Choose a character"),$(".character").removeClass("enemy defeated fighting me"),$("#reset").removeClass("show"),$("#attack").removeClass("hide"),$("#message").empty()}var m={charactersArray:[{name:"Ginny Weasley",hp:120,attack:15,counterAttack:8,image:"./assets/images/ginny.jpg",id:0},{name:"Neville Longbottom",hp:140,attack:20,counterAttack:12,image:"./assets/images/neville.jpg",id:1},{name:"Luna Lovegood",hp:170,attack:15,counterAttack:15,image:"./assets/images/luna.jpg",id:2},{name:"Colin Creevy",hp:115,attack:10,counterAttack:5,image:"./assets/images/colin.jpg",id:3}],gameStage:0,playerCharacter:{},enemies:[],enemyFighting:"",selectCharacter:function(e){var a=this,t=[],n;$.each(this.charactersArray,function(r,i){r===e?n=$.extend(!0,{},a.charactersArray[r]):t.push($.extend(!0,{},a.charactersArray[r]))}),this.playerCharacter=n,this.enemies=t,m.gameStage=1},selectOpponent:function(e){var a=this;$.each(a.enemies,function(t,n){e===n.id&&(a.enemyFighting=n)}),m.gameStage=2},attack:function(){var e=this;if(2===e.gameStage){var a=e.playerCharacter.attack,t=e.enemyFighting.counterAttack;return e.enemyFighting.hp-=a,e.playerCharacter.hp-=t,e.playerCharacter.attack+=e.charactersArray[e.playerCharacter.id].attack,e.enemyFighting.hp<=0&&this.win(),e.playerCharacter.hp<=0&&this.lose(),["Your hit "+e.enemyFighting.name+" for -"+a+"<br>"+e.enemyFighting.name+" hit you for -"+t,e.enemies,e.playerCharacter]}return["select a new opponent"]},win:function(){$("#"+m.enemyFighting.id).addClass("defeated").removeClass("fighting");var e=0;return $.each(m.enemies,function(a,t){t.hp<0&&(t.hp=0),e+=t.hp}),m.gameStage=1,e<=0?(o("You defeated everyone!"),!0):(h(this.enemyFighting.name),console.log(this.enemyFighting.name),!1)},lose:function(){o("You Lost")},reset:function(){m.gameStage=0,m.playerCharacter="",m.enemies=[],m.enemyFighting="",p()}};n(),console.log("hi"),$(".character").click(e),$("#attack").click(a),$("#reset").click(t)});