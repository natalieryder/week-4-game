$(document).ready(function(){function e(){var e=$(this).attr("id");return e=parseInt(e),0===g.gameStage?(g.selectCharacter(e),void s(e)):1===g.gameStage?g.playerCharacter.id===e?($("#message").html("you can't fight yourself"),!1):(g.selectOpponent(e),void i()):void 0}function a(){$("#message").empty();var e=g.attack();"war"===e.won&&o("You defeated everyone!"),"battle"===e.won&&(console.log(g.enemyFighting),console.log(this.enemyFighting),h(g.enemyFighting.name)),"lost"===e.won&&o("You Lost"),c(e.message),r(e.enemies),r(e.character)}function t(){r(g.reset()),m()}function n(){$.each(g.charactersArray,function(e,a){$("#instructions").html("Choose a character");var t=$("<div>").attr("id",e).addClass("character"),n=$("<div>").addClass("inside").appendTo(t);$("<p class='strong mb-0'>").html(a.name).appendTo(n),$("<img>").attr("src",a.image).addClass("img-fluid").appendTo(n);var r=$("<ul>").addClass("stats"),s=$("<li>").append("<span>").addClass("hp").prepend("Health: ");$(r).append(s).appendTo(n),$(t).appendTo("#characters")}),r(g.charactersArray)}function r(e){function a(e){var a="#"+e.id;$(a).find(".hp span").html(e.hp),$(a).find(".attack span").html(e.attack),$(a).find(".counter-attack span").html(e.counterAttack)}Array.isArray(e)?$.each(e,function(e,t){a(t)}):a(e)}function s(e){$("#"+e).addClass("me");var a=g.enemies;$.each(a,function(e,a){$("#"+a.id).addClass("enemy")}),$("#instructions").html("Choose opponent")}function i(){$("#"+g.enemyFighting.id).addClass("fighting"),$("#message").empty(),$("#instructions").html("Attack!")}function c(e){$("#message").prepend(e)}function o(e){$("#message").append("<br> "+e),$("#instructions").html(e),$("#reset").addClass("show"),$("#attack").addClass("hide")}function h(e){$("#message").append("<br>You defeated "+e+". Pick your next opponent!"),$("#instructions").html("Choose opponent")}function m(){$("#instructions").html("Choose a character"),$(".character").removeClass("enemy defeated fighting me"),$("#reset").removeClass("show"),$("#attack").removeClass("hide"),$("#message").empty()}var g={charactersArray:[{name:"Ginny Weasley",hp:120,attack:12,counterAttack:15,image:"./assets/images/ginny.jpg",id:0},{name:"Neville Longbottom",hp:130,attack:14,counterAttack:12,image:"./assets/images/neville.jpg",id:1},{name:"Luna Lovegood",hp:150,attack:10,counterAttack:15,image:"./assets/images/luna.jpg",id:2},{name:"Colin Creevy",hp:115,attack:10,counterAttack:10,image:"./assets/images/colin.jpg",id:3}],gameStage:0,playerCharacter:{},enemies:[],enemyFighting:"",selectCharacter:function(e){var a=this,t=[],n;$.each(this.charactersArray,function(r,s){r===e?n=$.extend(!0,{},a.charactersArray[r]):t.push($.extend(!0,{},a.charactersArray[r]))}),this.playerCharacter=n,this.enemies=t,a.gameStage=1},selectOpponent:function(e){var a=this;$.each(a.enemies,function(t,n){e===n.id&&(a.enemyFighting=n)}),a.gameStage=2},attack:function(){var e=this,a={};if(2===e.gameStage){var t=e.playerCharacter.attack,n=e.enemyFighting.counterAttack;e.enemyFighting.hp-=t,e.playerCharacter.hp-=n,e.playerCharacter.attack+=e.charactersArray[e.playerCharacter.id].attack,e.enemyFighting.hp<=0&&(this.win()?a.won="war":a.won="battle"),e.playerCharacter.hp<=0&&(a.won="lost"),a.message="You hit "+e.enemyFighting.name+" for -"+t+"<br>"+e.enemyFighting.name+" hit you for -"+n}else a.message=["Select a new opponent."];return a.enemies=e.enemies,a.character=e.playerCharacter,console.log("the result is"),console.log(a),a},win:function(){var e=this;$("#"+e.enemyFighting.id).addClass("defeated").removeClass("fighting");var a=0;return $.each(e.enemies,function(e,t){t.hp<0&&(t.hp=0),a+=t.hp}),e.gameStage=1,a<=0},reset:function(){return g.gameStage=0,g.playerCharacter="",g.enemies=[],g.enemyFighting="",this.charactersArray}};n(),console.log("hi"),$(".character").click(e),$("#attack").click(a),$("#reset").click(t)});