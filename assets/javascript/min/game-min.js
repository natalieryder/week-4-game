$(document).ready(function(){function a(){$.each(s.charactersArray,function(a,e){var t=$("<div>").attr("id",a).addClass("col col-3 character");$("<img>").attr("src",e.image).addClass("img-fluid").appendTo(t);var c=$("<ul>").addClass("stats"),n=$("<li>").addClass("hp"),i=$("<li>").addClass("attack"),s=$("<li>").addClass("counter-attack");$(c).append(n).append(i).append(s).appendTo(t),$(t).appendTo("#characters")}),e(s.charactersArray)}function e(a){$.each(a,function(a,e){var t="#"+e.id;$(t).find(".hp").html(e.hp),$(t).find(".attack").html(e.attack),$(t).find(".counter-attack").html(e.counterAttack)})}function t(a){a=parseInt(a),$("#"+a).addClass("me");var e=s.enemies;$.each(e,function(a,e){$("#"+e.id).addClass("enemy")})}function c(a){$("#"+s.charactersArray[a].id).addClass("fighting")}function n(){var a=$(this).attr("id");1===s.gameStage&&(s.selectOpponent(a),c(a),s.gameStage=2),0===s.gameStage&&(s.selectCharacter(a),t(a),s.gameStage=1)}function i(){s.attack()}var s={charactersArray:[{name:"Ginny Weasley",hp:120,attack:8,baseAttack:8,counterAttack:10,image:"./assets/images/ginny.jpg",id:0},{name:"Neville Longbottom",hp:150,attack:20,baseAttack:20,counterAttack:20,image:"./assets/images/neville.jpg",id:1},{name:"Luna Lovegood",hp:180,attack:25,baseAttack:25,counterAttack:25,image:"./assets/images/luna.jpg",id:2},{name:"Colin Creevy",hp:100,attack:5,baseAttack:5,counterAttack:5,image:"./assets/images/colin.jpg",id:3}],gameStage:0,playerCharacter:{},enemies:[],enemyFighting:"",selectCharacter:function(a){a=parseInt(a);var e=this,t=[],c;$.each(this.charactersArray,function(n,i){n===a?c=$.extend(!0,{},e.charactersArray[n]):t.push($.extend(!0,{},e.charactersArray[n]))}),this.playerCharacter=c,this.enemies=t},selectOpponent:function(a){a=parseInt(a),thisGame=this,$.each(thisGame.enemies,function(e,t){a===t.id&&(thisGame.enemyFighting=t,console.log("i'm fighting "+thisGame.enemyFighting.name))})},attack:function(){var a=this;if(2===s.gameStage){var t=s.playerCharacter.attack,c=s.enemyFighting.counterAttack;console.log(t+"  "+c),console.log(s.charactersArray),s.enemyFighting.hp-=t,s.playerCharacter.hp-=c,s.playerCharacter.attack+=s.playerCharacter.baseAttack,s.enemyFighting.hp<=0&&(console.log("you won"),$("#"+s.enemyFighting.id).hide(),s.gameStage=1),s.playerCharacter.hp<=0&&(console.log("you lose"),s.reset()),e(s.enemies)}},reset:function(){s.charactersArray=[{name:"Ginny Weasley",hp:120,attack:8,baseAttack:8,counterAttack:10,image:"./assets/images/ginny.jpg",id:0},{name:"Neville Longbottom",hp:150,attack:20,baseAttack:20,counterAttack:20,image:"./assets/images/neville.jpg",id:1},{name:"Luna Lovegood",hp:180,attack:25,baseAttack:25,counterAttack:25,image:"./assets/images/luna.jpg",id:2},{name:"Colin Creevy",hp:100,attack:5,baseAttack:5,counterAttack:5,image:"./assets/images/colin.jpg",id:3}],s.gameStage=0,s.playerCharacter="",s.enemies=[],s.enemyFighting="",$(".character").removeClass("enemy fighting me")}};a(),$(".character").click(n),$("#attack").click(i)});