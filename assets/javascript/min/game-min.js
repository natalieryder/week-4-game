$(document).ready(function(){function a(){$.each(r.charactersArray,function(a,e){var t=$("<div>").attr("id",a).addClass("col col-3 character");$("<img>").attr("src",e.image).addClass("img-fluid").appendTo(t);var n=$("<ul>").addClass("stats"),c=$("<li>").addClass("hp"),i=$("<li>").addClass("attack"),r=$("<li>").addClass("counter-attack");$(n).append(c).append(i).append(r).appendTo(t),$(t).appendTo("#characters")}),e(r.charactersArray)}function e(a){function e(a){var e="#"+a.id;$(e).find(".hp").html(a.hp),$(e).find(".attack").html(a.attack),$(e).find(".counter-attack").html(a.counterAttack)}Array.isArray(a)?$.each(a,function(a,t){e(t)}):e(a)}function t(a){a=parseInt(a),$("#"+a).addClass("me");var e=r.enemies;$.each(e,function(a,e){$("#"+e.id).addClass("enemy")})}function n(a){$("#"+r.charactersArray[a].id).addClass("fighting")}function c(){var a=$(this).attr("id");1===r.gameStage&&(r.selectOpponent(a),n(a),r.gameStage=2),0===r.gameStage&&(r.selectCharacter(a),t(a),r.gameStage=1)}function i(){r.attack()}var r={charactersArray:[{name:"Ginny Weasley",hp:120,attack:8,baseAttack:8,counterAttack:10,image:"./assets/images/ginny.jpg",id:0},{name:"Neville Longbottom",hp:150,attack:20,baseAttack:20,counterAttack:20,image:"./assets/images/neville.jpg",id:1},{name:"Luna Lovegood",hp:180,attack:25,baseAttack:25,counterAttack:25,image:"./assets/images/luna.jpg",id:2},{name:"Colin Creevy",hp:100,attack:5,baseAttack:5,counterAttack:5,image:"./assets/images/colin.jpg",id:3}],gameStage:0,playerCharacter:{},enemies:[],enemyFighting:"",selectCharacter:function(a){a=parseInt(a);var e=this,t=[],n;$.each(this.charactersArray,function(c,i){c===a?n=$.extend(!0,{},e.charactersArray[c]):t.push($.extend(!0,{},e.charactersArray[c]))}),this.playerCharacter=n,this.enemies=t},selectOpponent:function(a){a=parseInt(a),thisGame=this,$.each(thisGame.enemies,function(e,t){a===t.id&&(thisGame.enemyFighting=t,console.log("i'm fighting "+thisGame.enemyFighting.name))})},attack:function(){var a=this;if(2===r.gameStage){var t=r.playerCharacter.attack,n=r.enemyFighting.counterAttack;console.log(t+"  "+n),r.enemyFighting.hp-=t,r.playerCharacter.hp-=n,r.playerCharacter.attack+=r.playerCharacter.baseAttack,r.enemyFighting.hp<=0&&(console.log("you won"),$("#"+r.enemyFighting.id).hide(),r.gameStage=1),r.playerCharacter.hp<=0&&(console.log("you lose"),r.reset()),e(r.enemies),e(r.playerCharacter)}},reset:function(){r.charactersArray=[{name:"Ginny Weasley",hp:120,attack:8,baseAttack:8,counterAttack:10,image:"./assets/images/ginny.jpg",id:0},{name:"Neville Longbottom",hp:150,attack:20,baseAttack:20,counterAttack:20,image:"./assets/images/neville.jpg",id:1},{name:"Luna Lovegood",hp:180,attack:25,baseAttack:25,counterAttack:25,image:"./assets/images/luna.jpg",id:2},{name:"Colin Creevy",hp:100,attack:5,baseAttack:5,counterAttack:5,image:"./assets/images/colin.jpg",id:3}],r.gameStage=0,r.playerCharacter="",r.enemies=[],r.enemyFighting="",$(".character").removeClass("enemy fighting me")}};a(),$(".character").click(c),$("#attack").click(i)});