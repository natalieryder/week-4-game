$(document).ready(function(){function a(){$.each(r.charactersArray,function(a,e){var t=$("<div>").attr("id",a).addClass("col col-3 character");$("<img>").attr("src",e.image).addClass("img-fluid").appendTo(t);var c=$("<ul>").addClass("stats"),n=$("<li>").addClass("hp"),r=$("<li>").addClass("attack"),s=$("<li>").addClass("counter-attack");$(c).append(n).append(r).append(s).appendTo(t),$(t).appendTo("#characters")}),e(r.charactersArray)}function e(a){console.log(a),$.each(a,function(a,e){var t="#"+e.id;$(t).find(".hp").html(e.hp),$(t).find(".attack").html(e.attack),$(t).find(".counter-attack").html(e.counterAttack)})}function t(a){a=parseInt(a),$("#"+a).addClass("me");var e=r.enemies;$.each(e,function(a,e){$("#"+e.id).addClass("enemy")})}function c(a){$("#"+r.charactersArray[a].id).addClass("fighting")}function n(){var a=$(this).attr("id");1===r.gameStage&&(r.selectOpponent(a),c(a),r.gameStage=2),0===r.gameStage&&(r.selectCharacter(a),t(a),r.gameStage=1)}var r={charactersArray:[{name:"Ginny Weasley",hp:120,attack:8,baseAttack:8,counterAttack:10,image:"./assets/images/ginny.jpg",id:0},{name:"Neville Longbottom",hp:150,attack:20,baseAttack:20,counterAttack:20,image:"./assets/images/neville.jpg",id:1},{name:"Luna Lovegood",hp:180,attack:25,baseAttack:25,counterAttack:25,image:"./assets/images/luna.jpg",id:2},{name:"Colin Creevy",hp:100,attack:5,baseAttack:5,counterAttack:5,image:"./assets/images/colin.jpg",id:3}],gameStage:0,playerCharacter:"",enemies:[],enemyFighting:"",selectCharacterNotArray:function(a){var e=this;$.each(this.characters,function(t,c){t===a?e.playerCharacter=e.characters[t]:e.enemies.push(e.characters[t])}),console.log("my char is "+this.playerCharacter.name),console.log("my enemies are "+this.enemies[0].name+this.enemies[1].name+this.enemies[2].name)},selectCharacter:function(a){a=parseInt(a);var e=this;$.each(this.charactersArray,function(t,c){t===a?e.playerCharacter=e.charactersArray[t]:e.enemies.push(e.charactersArray[t])}),console.log("my char is "+this.playerCharacter.name),console.log("my enemies are "+this.enemies[0].name+this.enemies[1].name+this.enemies[2].name)},selectOpponent:function(a){this.enemyFighting=this.charactersArray[a],console.log("i'm fighting "+this.enemyFighting.name)},attack:function(){var a=this;if(2===r.gameStage){var t=r.playerCharacter.attack,c=r.enemyFighting.counterAttack;r.enemyFighting.hp-=t,r.playerCharacter.hp-=c,r.playerCharacter.attack+=r.playerCharacter.baseAttack,r.enemyFighting.hp<=0&&(console.log("you won"),$("#"+r.enemyFighting.id).hide(),r.gameStage=1),r.playerCharacter.hp<=0&&(console.log("you lose"),r.reset()),e(r.charactersArray)}},reset:function(){r.charactersArray=[{name:"Ginny Weasley",hp:120,attack:8,baseAttack:8,counterAttack:10,image:"./assets/images/ginny.jpg",id:0},{name:"Neville Longbottom",hp:150,attack:20,baseAttack:20,counterAttack:20,image:"./assets/images/neville.jpg",id:1},{name:"Luna Lovegood",hp:180,attack:25,baseAttack:25,counterAttack:25,image:"./assets/images/luna.jpg",id:2},{name:"Colin Creevy",hp:100,attack:5,baseAttack:5,counterAttack:5,image:"./assets/images/colin.jpg",id:3}],r.gameStage=0,r.playerCharacter="",r.enemies=[],r.enemyFighting="",$(".character").removeClass("enemy fighting me")}};a(),$(".character").click(n),$("#attack").click(r.attack)});